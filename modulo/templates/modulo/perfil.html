{% extends 'modulo/base.html' %}
{% load static %}

{% block content %}

{% if messages %}
<div class="mt-3">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
    {% endfor %}
</div>
{% endif %}

<div class="container mt-5">
    <h2 class="mb-4">Perfil de Usuario</h2>

        <div class="text-center position-relative d-inline-block" style="width: 150px; height: 150px;">
            {% if user.perfil.foto_perfil %}
                <img src="{{ user.perfil.foto_perfil.url }}" alt="Foto de Perfil" class="rounded-circle shadow" style="width: 100%; height: 100%; object-fit: cover;">
            {% else %}
                <img src="{% static 'default-avatar.png' %}" alt="Foto de Perfil" class="rounded-circle shadow" style="width: 100%; height: 100%; object-fit: cover;">
            {% endif %}

            <form method="post" enctype="multipart/form-data" action="{% url 'perfil' %}">
        {% csrf_token %}
        <input type="hidden" name="editar_foto" value="1"> <input type="file" name="foto_perfil" id="upload" class="d-none" onchange="this.form.submit()">
        <label for="upload" class="btn btn-light p-1 rounded-circle position-absolute bottom-0 end-0 shadow-sm">
            <i class="bi bi-pencil" style="font-size: 16px;"></i>
        </label>
    </form>
    </div>

    <hr class="mt-4">

    <div class="row mt-4">
        <div class="col-md-6">
            <h4>Editar Perfil</h4>
            <form method="post" action="{% url 'perfil' %}" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form_perfil.as_p }}
                <button type="submit" name="editar_perfil" class="btn btn-primary">Guardar Cambios</button>
            </form>
        </div>
        <div class="col-md-6">
            <h4>Cambiar Contraseña</h4>
            <form method="post" action="{% url 'perfil' %}">
                {% csrf_token %}
                {{ form_password.as_p }}
                <button type="submit" name="cambiar_password" class="btn btn-warning">Actualizar Contraseña</button>
            </form>
        </div>
    </div>
</div>

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

{% endblock %}





